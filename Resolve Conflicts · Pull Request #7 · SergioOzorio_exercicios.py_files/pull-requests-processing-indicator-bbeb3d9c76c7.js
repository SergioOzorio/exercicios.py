"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["pull-requests-processing-indicator"],{21605:(e,t,n)=>{n.d(t,{y:()=>i});var s=n(74848),a=n(96540),r=n(31481);function i({children:e,appName:t,category:n,metadata:i}){let o=(0,a.useMemo)(()=>({appName:t,category:n,metadata:i}),[t,n,i]);return(0,s.jsx)(r.I.Provider,{value:o,children:e})}try{i.displayName||(i.displayName="AnalyticsProvider")}catch{}},31481:(e,t,n)=>{n.d(t,{I:()=>s});let s=(0,n(96540).createContext)(null)},51848:(e,t,n)=>{let s;n.d(t,{BI:()=>p,Ti:()=>f,lA:()=>m});var a=n(70837),r=n(18679),i=n(74572),o=n(51528);let{getItem:l}=(0,i.A)("localStorage"),c="dimension_",d=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","scid"];try{let e=(0,a.O)("octolytics");delete e.baseContext,s=new r.s(e)}catch(e){}function u(e){let t=(0,a.O)("octolytics").baseContext||{};if(t)for(let[e,n]of(delete t.app_id,delete t.event_url,delete t.host,Object.entries(t)))e.startsWith(c)&&(t[e.replace(c,"")]=n,delete t[e]);let n=document.querySelector("meta[name=visitor-payload]");for(let[e,s]of(n&&Object.assign(t,JSON.parse(atob(n.content))),new URLSearchParams(window.location.search)))d.includes(e.toLowerCase())&&(t[e]=s);return t.staff=(0,o.X)().toString(),Object.assign(t,e)}function m(e){s?.sendPageView(u(e))}function p(e,t={}){let n=document.head?.querySelector('meta[name="current-catalog-service"]')?.content,a=n?{service:n}:{};for(let[e,n]of Object.entries(t))null!=n&&(a[e]=`${n}`);s&&(u(a),s.sendEvent(e||"unknown",u(a)))}function f(e){return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,JSON.stringify(t)]))}},67726:(e,t,n)=>{n.d(t,{l:()=>s});let s=()=>void 0},23307:(e,t,n)=>{var s=n(72245),a=n(74848),r=n(28784),i=n(75177),o=n(55847),l=n(38553),c=n(52464),d=n(80577),u=n(96540),m=n(71312),p=n(21605),f=n(73272),h=n(38621);let y={stale:!1,latest_unsynced_push_to_head_ref_at:null};function _({processingIndicatorUrl:e,repositoryId:t,pullRequestId:n}){let[s,o]=(0,u.useState)(y),l=(0,f.A)(),c=(0,u.useCallback)(async()=>{try{let t=await (0,r.lS)(e);if(t.ok){let e=await t.json();l()&&o(e)}}catch(e){l()&&o(y)}},[l,e]);(0,u.useEffect)(()=>{c()},[]);let{stale:d,latest_unsynced_push_to_head_ref_at:m}=s;return(0,a.jsx)(i.A,{sx:{mt:-2},children:(0,a.jsx)(p.y,{appName:"pull-requests-processing-indicator",category:"render",metadata:{},children:(0,a.jsx)(v,{pullRequestId:n,repositoryId:t,stale:d,latest_unsynced_push_to_head_ref_at:m})})})}function v({pullRequestId:e,repositoryId:t,stale:n,latest_unsynced_push_to_head_ref_at:s}){let{sendAnalyticsEvent:r}=(0,m.s)();if(!n||!s)return null;let u=new Date,p=new Date(s),f=Math.round(u.getTime()-p.getTime())/1e3;return f<20||f>=86400?null:(r("pull_requests.processing_indicator","",{repositoryId:t,pullRequestId:e,secondsSinceLastPush:f}),(0,a.jsx)(d.m,{text:"Recent push is still being processed, and will show up in a bit",direction:"s",children:(0,a.jsx)(o.Q,{as:"a",href:"https://gh.io/pr-sync-in-progress",variant:"invisible",sx:{color:"fg.muted"},trailingVisual:h.LinkExternalIcon,children:(0,a.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",fontWeight:400},children:[(0,a.jsx)(l.A,{size:"small",sx:{color:"fg.muted"}}),(0,a.jsx)(c.A,{sx:{color:"fg.muted",fontSize:0,ml:2},children:"Processing updates"})]})})}))}try{_.displayName||(_.displayName="PullRequestsProcessingIndicatorWithDataFetching")}catch{}try{v.displayName||(v.displayName="PullRequestsProcessingIndicator")}catch{}(0,s.k)("pull-requests-processing-indicator",{Component:_})},23581:(e,t,n)=>{n.d(t,{A:()=>o});let{getItem:s,setItem:a,removeItem:r}=(0,n(74572).A)("localStorage"),i="REACT_PROFILING_ENABLED",o={enable:()=>a(i,"true"),disable:()=>r(i),isEnabled:()=>!!s(i)}},71312:(e,t,n)=>{n.d(t,{S:()=>o,s:()=>i});var s=n(96540),a=n(51848),r=n(31481);function i(){let e=(0,s.useContext)(r.I);if(!e)throw Error("useAnalytics must be used within an AnalyticsContext");let{appName:t,category:n,metadata:i}=e;return{sendAnalyticsEvent:(0,s.useCallback)((e,s,r={})=>{let o={react:!0,app_name:t,category:n,...i};(0,a.BI)(e,{...o,...r,target:s})},[t,n,i])}}function o(){let{sendAnalyticsEvent:e}=i();return{sendClickAnalyticsEvent:(0,s.useCallback)((t={})=>{e("analytics.click",void 0,t)},[e])}}},59840:(e,t,n)=>{n.d(t,{m:()=>r});var s=n(96540),a=n(97156);function r(e,t){a.KJ&&(0,s.useLayoutEffect)(e,t)}},73272:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(59840),a=n(96540);function r(){let e=(0,a.useRef)(!1),t=(0,a.useCallback)(()=>e.current,[]);return(0,s.m)(()=>(e.current=!0,()=>{e.current=!1}),[]),t}},83784:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(73272),a=n(96540);let r=function(e){let t=(0,s.A)(),[n,r]=(0,a.useState)(e);return[n,(0,a.useCallback)(e=>{t()&&r(e)},[t])]}},28784:(e,t,n)=>{function s(e,t={}){!function(e){if(new URL(e,window.location.origin).origin!==window.location.origin)throw Error("Can not make cross-origin requests from verifiedFetch")}(e);let n={...t.headers,"GitHub-Verified-Fetch":"true","X-Requested-With":"XMLHttpRequest"};return fetch(e,{...t,headers:n})}function a(e,t){let n={...t?.headers??{},Accept:"application/json","Content-Type":"application/json"},a=t?.body?JSON.stringify(t.body):void 0;return s(e,{...t,body:a,headers:n})}function r(e,t={}){let n={...t.headers,"GitHub-Is-React":"true"};return s(e,{...t,headers:n})}function i(e,t){let n={...t?.headers??{},"GitHub-Is-React":"true"};return a(e,{...t,headers:n})}n.d(t,{DI:()=>s,QJ:()=>r,Sr:()=>i,lS:()=>a})},47831:(e,t,n)=>{n.d(t,{D3:()=>c,O8:()=>s,xd:()=>l});var s,a=n(74848),r=n(96540),i=n(97156),o=n(59840);!function(e){e.ServerRender="ServerRender",e.ClientHydrate="ClientHydrate",e.ClientRender="ClientRender"}(s||(s={}));let l=(0,r.createContext)("ClientRender");function c({wasServerRendered:e,children:t}){let[n,s]=(0,r.useState)(()=>i.X3?"ServerRender":e?"ClientHydrate":"ClientRender");return(0,o.m)(()=>{"ClientRender"!==n&&s("ClientRender")},[n]),(0,a.jsx)(l.Provider,{value:n,children:t})}try{l.displayName||(l.displayName="RenderPhaseContext")}catch{}try{c.displayName||(c.displayName="RenderPhaseProvider")}catch{}},54156:(e,t,n)=>{n.d(t,{Qn:()=>l,T8:()=>d,Y6:()=>m,k6:()=>u});var s=n(74848),a=n(65556),r=n(96540),i=n(67726),o=n(83784);let l=5e3,c=(0,r.createContext)({addToast:i.l,addPersistedToast:i.l,clearPersistedToast:i.l}),d=(0,r.createContext)({toasts:[],persistedToast:null});function u({children:e}){let[t,n]=(0,o.A)([]),[i,u]=(0,r.useState)(null),{safeSetTimeout:m}=(0,a.A)(),p=(0,r.useCallback)(function(e){n([...t,e]),m(()=>n(t.slice(1)),l)},[t,m,n]),f=(0,r.useCallback)(function(e){u(e)},[u]),h=(0,r.useCallback)(function(){u(null)},[u]),y=(0,r.useMemo)(()=>({addToast:p,addPersistedToast:f,clearPersistedToast:h}),[f,p,h]),_=(0,r.useMemo)(()=>({toasts:t,persistedToast:i}),[t,i]);return(0,s.jsx)(c.Provider,{value:y,children:(0,s.jsx)(d.Provider,{value:_,children:e})})}function m(){return(0,r.useContext)(c)}try{c.displayName||(c.displayName="ToastContext")}catch{}try{d.displayName||(d.displayName="InternalToastsContext")}catch{}try{u.displayName||(u.displayName="ToastContextProvider")}catch{}},67870:(e,t,n)=>{n.d(t,{V:()=>m});var s=n(74848),a=n(96540),r=n(54156),i=n(38621),o=n(65556),l=n(16255);let c={info:"",success:"Toast--success",error:"Toast--error"},d={info:(0,s.jsx)(i.InfoIcon,{}),success:(0,s.jsx)(i.CheckIcon,{}),error:(0,s.jsx)(i.StopIcon,{})},u=({message:e,timeToLive:t,icon:n,type:r="info",role:i="log"})=>{let[u,m]=a.useState(!0),{safeSetTimeout:p}=(0,o.A)();return(0,a.useEffect)(()=>{t&&p(()=>m(!1),t-300)},[p,t]),(0,s.jsx)(l.Z,{children:(0,s.jsx)("div",{className:"p-1 position-fixed bottom-0 left-0 mb-3 ml-3",children:(0,s.jsxs)("div",{className:`Toast ${c[r]} ${u?"Toast--animateIn":"Toast--animateOut"}`,id:"ui-app-toast","data-testid":`ui-app-toast-${r}`,role:i,children:[(0,s.jsx)("span",{className:"Toast-icon",children:n||d[r]}),(0,s.jsx)("span",{className:"Toast-content",children:e})]})})})};try{u.displayName||(u.displayName="Toast")}catch{}function m(){let{toasts:e,persistedToast:t}=(0,a.useContext)(r.T8);return(0,s.jsxs)(s.Fragment,{children:[e.map((e,t)=>(0,s.jsx)(u,{message:e.message,icon:e.icon,timeToLive:r.Qn,type:e.type,role:e.role},t)),t&&(0,s.jsx)(u,{message:t.message,icon:t.icon,type:t.type,role:t.role})]})}try{m.displayName||(m.displayName="Toasts")}catch{}}},e=>{var t=t=>e(e.s=t);e.O(0,["primer-react","react-core","react-lib","octicons-react","vendors-node_modules_primer_behaviors_dist_esm_index_mjs","vendors-node_modules_emotion_is-prop-valid_dist_emotion-is-prop-valid_esm_js-node_modules_emo-41da55","vendors-node_modules_oddbird_popover-polyfill_dist_popover-fn_js","vendors-node_modules_github_catalyst_lib_index_js-node_modules_github_hydro-analytics-client_-3af2334","ui_packages_failbot_failbot_ts"],()=>t(23307)),e.O()}]);
//# sourceMappingURL=pull-requests-processing-indicator-d3ff4fa4a343.js.map